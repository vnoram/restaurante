{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
  <!-- Mostrar Mensajes -->
  {% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
    <div class="alert {% if message.tags == 'error' %}alert-danger{% else %}alert-success{% endif %} alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  
    {% endfor %}
  </div>
  {% endif %}

  <!-- Título -->
  <h1 class="text-center text-primary mb-4">Comprar Platillos</h1>

  <!-- Formulario para Comprar -->
  <form method="POST" class="text-center">
    {% csrf_token %}
    <div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead class="table-success">
          <tr>
            <th scope="col">Seleccionar</th>
            <th scope="col">Nombre del Platillo</th>
            <th scope="col">Precio</th>
          </tr>
        </thead>
        <tbody>
          {% for platillo in platillos %}
          <tr>
            <td>
              <input
                type="checkbox"
                name="platillos"
                value="{{ platillo.id }}"
                class="form-check-input"
              />
            </td>
            <td>{{ platillo.nombre }}</td>
            <td>${{ platillo.precio|floatformat:2 }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="3" class="text-center text-danger">
              No hay platillos disponibles.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Botón para Comprar -->
    <div class="mt-4">
      <button type="submit" class="btn btn-success btn-lg">Comprar</button>
    </div>
  </form>

  <!-- Enlace para Volver -->
  <div class="mt-4 text-center">
    <a href="{% url 'menu' %}" class="btn btn-outline-secondary btn-lg">Volver al Menú</a>
  </div>
</div>
{% endblock %}
